/*! For license information please see 8a8d1248ec52d898.js.LICENSE.txt */
"use strict";!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.creator=i():t.creator=i()}(self,(()=>(self.webpackChunk=self.webpackChunk||[]).push([[659],{8110:(t,i,a)=>{a.r(i),a.d(i,{default:()=>g});var e=a(4168),o=a(1221),s=a(2736),n=a(8291),r=a(1115),l=a(3202),c=a(2842);function h(t,i,a){return(i=function(t){var i=function(t,i){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var e=a.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof i?i:String(i)}(i))in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}var u=a(8651),d=a(7723),v=a(4230),p=a(468);function f(t,i,a){return(i=function(t){var i=function(t,i){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var e=a.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof i?i:String(i)}(i))in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}const g=new class{constructor(){f(this,"inputManager",null),f(this,"creator",null),f(this,"translations",{}),o.Z.ready((async()=>{const t=window.mybrandnewlogo,i=t.logo;this.translations=t.translations,await this.start({id:i.id,state:i.state});const a=v.Z.$modal.length?v.Z.$modal:(0,o.Z)(".js-modal-register");i.purchaseIntent&&(a.length?a.hasEvent("open")&&a.trigger("open"):p.Z.captureError("no modal to open"))}))}async start({id:t=null,state:i=null}={}){this.inputManager=new d.Z(document.body),this.creator=new s.Z("logo",{controls:".js-logo-controls",inputManager:this.inputManager,translations:this.translations,enableMockups:!0}),await this.creator.create({id:unescape(t),savedState:JSON.parse(unescape(i))}),v.Z.setCreator(this.creator),this.inputManager.showMappings&&u.Z.add(this,(()=>(this.inputManager.drawMappings(),!0))),this.creator.variations=new class{constructor({creator:t=null,callback:i=null}={}){h(this,"LOGOS_PER_PAGE",12),h(this,"div",null),h(this,"creator",null),h(this,"creators",[]),h(this,"$content",null),h(this,"$button",null),h(this,"$controls",null),h(this,"callback",null),h(this,"variations",null),h(this,"$variationList",null),h(this,"$setList",null),h(this,"isAddingVariations",!1),h(this,"$variationAll",null),h(this,"$variationFont",null),h(this,"$variationColor",null),h(this,"$variationLayout",null),this.creator=t,this.callback=i,this.$content=(0,o.Z)(".js-variation-selector"),this.$variationList=(0,o.Z)(".js-variation-selector__items"),this.$variationAll=(0,o.Z)(".js-variation-selector-style-all"),this.$variationFont=(0,o.Z)(".js-variation-selector-style-font"),this.$variationColor=(0,o.Z)(".js-variation-selector-style-color"),this.$variationLayout=(0,o.Z)(".js-variation-selector-style-layout"),this.$close=(0,o.Z)(".js-variation-selector__close")}activate(){this.$variationAll.on("click",(()=>{e.Z.closeMenu(),this.updateVariations("keep-icon")})),this.$variationFont.on("click",(()=>{e.Z.closeMenu(),this.updateVariations("font")})),this.$variationColor.on("click",(()=>{e.Z.closeMenu(),this.updateVariations("color")})),this.$variationLayout.on("click",(()=>{e.Z.closeMenu(),this.updateVariations("layout")})),this.$close.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.deactivate(),this.hide()})),this.onUpdate()}deactivate(){[this.$variationAll,this.$variationLayout,this.$variationColor,this.$variationFont,this.$close].forEach((t=>{t&&t.off()}))}onUpdate(){}async show(){(0,o.Z)(".js-variation-selector-content").addClass("active"),this.$content.addClass("active"),e.Z.setNavigation(this.$content,this.$content.find(".js-modal-navigation")),await n.Z.show(),this.creators.length?this.creators.forEach((t=>{t.onResize()})):await this.addVariations("keep-icon")}clear(){for(const t of this.creators)t.destroy();this.creators=[],this.$variationList.empty()}updateVariations(t=null){this.isAddingVariations||(this.clear(),this.addVariations(t))}async addVariations(t=null){this.$content.removeClass("interactive"),this.$close.addClass("disabled"),this.isAddingVariations=!0;const i=[];for(let a=0;a<this.LOGOS_PER_PAGE;a++){const e=(0,o.Z)("<div>").addClass("b-logo-wrap").appendTo(this.$variationList),n=(0,o.Z)("<div>").addClass("b-logo-card").attribute("id",`logo-${(0,r.Z)()}`).html('\n<div class="b-logo-card__loading">\n\t<div class="b-logo-card__loading-icon"></div>\n</div>\n').appendTo(e),h=new s.Z(n.attribute("id"),{useCanvas:!0});this.creators.push(h),n.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.activateVariation(h.logo.getState())}));const u=this.creator.logo.getState({texts:!0}),d={text:(0,c.Z)(u?.state?.elements?.name?.text),sloganText:(0,c.Z)(u?.state?.elements?.slogan?.text),symbolText:(0,c.Z)(u?.state?.elements?.symbol?.text),variation:0===a?null:t,savedState:t||0===a?u:null};i.push((async()=>{await h.create(d),await l.Z.wait()}))}for(const t of i)await t();this.isAddingVariations=!1,this.$content.addClass("interactive"),this.$close.removeClass("disabled")}async hide(){this.$content.removeClass("active"),await n.Z.hide(),(0,o.Z)(".js-variation-selector-content").removeClass("active"),e.Z.unsetNavigation()}async activateVariation(t){this.deactivate(),await this.creator.recreate({state:t}),this.callback&&this.callback(t),await this.hide()}}({creator:this.creator,callback:t=>{}})}}}},t=>{var i=i=>t(t.s=i);return t.O(0,[483,851,13,242,139,230,710,893],(()=>(i(3407),i(8110)))),t.O()}])));